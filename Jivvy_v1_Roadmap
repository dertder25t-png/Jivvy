# Jivvy: The Design Student's OS (Executable Build Guide)

**Status:** Ready for Code  
**Target User:** Graphic Design Students  
**Strategy:** *Tool First, AI Second.* (Build the desk, then hire the tutor.)

---

## üèÉ Sprint 1: The Digital Desk (Foundation & MVP)

**Goal:** A fully functional design workspace (PDF + Canvas + Notes) that works without any AI.  
**Estimated Time:** 2 Weeks

### Step 1.1: Environment & "Soft Pop" Shell

- [x] Init: Next.js 14 (App Router) + Tailwind CSS + Lucide React + Zustand.
- [x] Theme Config: Set colors (`#121212` bg, `#a3e635` accent).
- [x] Component Library: Build `BentoCard`, `NavButton`, and `GummyButton` (Scale `0.95` on click).
- [x] Layout: Responsive shell (Sidebar on Desktop, Floating Island on Mobile).

### Step 1.2: Database & Auth (Supabase)

- [x] Init: Create Supabase project.
- [x] Auth: Enable Google & Email auth.
- [x] Storage: Public buckets ‚Äî `briefs` (PDFs), `user-images`, `canvas-snapshots`.
- [x] Schema: Run SQL migrations for `projects`, `notes`, `canvas_snapshots` (see Reference A).

### Step 1.3: The "Split View" (PDF & Specs)

- [x] PDF Viewer: Install `react-pdf`. Left-pane viewer rendering `projects.pdf_url`.
- [x] Spec Sidebar: Static right-hand sidebar with editable checklist UI.

### Step 1.4: The "Infinite Canvas" (TLDraw)

- [x] Integration: Install `tldraw`, mount in center pane.
- [x] Image Upload: Intercept drops. **Critical:** Resize images >2000px client-side before upload.
- [x] Persistence: "5-Minute Snapshot" rule. Save opaque JSON blobs to Storage (not DB).

### Step 1.5: The Notebook & Squint Test

- [x] Editor: Install `tiptap` (headless). Persist to `notes` table (HTML/JSON).
- [x] Squint Slider: Range slider (0‚Äì100) applying `backdrop-filter: blur(Xpx)` to Canvas.

---

## üß† Sprint 2: The Smart Layer (Utility AI)

**Goal:** Automate boring tasks using explicit buttons (no background jobs).  
**Estimated Time:** 1 Week

### Step 2.1: Spec Sheet Extractor

- [x] UI: "Generate Specs" button in Spec Sidebar.
- [x] Backend: Server Action `generateSpecSheet(pdfUrl)`.
- [x] AI: Gemini 1.5 Flash ‚Äî extract constraints as JSON.
- [x] State: Populate checklist with result.

### Step 2.2: The Prompt Assistant (Ref Hunter)

- [x] UI: Context menu on text highlight ‚Üí "Find Refs".
- [x] Backend: Server Action `generateSearchQueries(text)`.
- [x] AI: Gemini 1.5 Flash.
- [x] Result: Render buttons opening Behance/Pinterest.

### Step 2.3: Manual Flashcards (Gamified)

- [ ] UI: "Flashcard Mode" toggle in Notebook.
- [ ] Interaction: Highlight text ‚Üí "Make Card".
- [ ] Visual: Highlight source text in whatever color the flashcard is(let user be able to pick).
- [ ] DB: Save to `flashcards` table with `source_node_id`. 

### Step 2.4: Tone Tuner

- [ ] UI: Floating bubble menu in Tiptap ‚Üí "Make Academic".
- [ ] AI: Gemini 1.5 Flash rewrites selected text.

---

## üë©‚Äç‚öïÔ∏è Sprint 3: The Design Doctor (Pro Features)

**Goal:** Monetization via high-value critiques & automation.  
**Estimated Time:** 1 Week

### Step 3.1: Quick Crop Critique (Mode A)

- [ ] UI: "Ask Doctor" ‚Üí crop tool overlay.
- [ ] Input: User selects area + ONE issue.
- [ ] AI: Gemini 1.5 Pro (PNG + Issue).
- [ ] Output: Modal critique, no chat history.

### Step 3.2: Full Canvas Critique (Mode B)

- [ ] UI: "Check Vibes" button.
- [ ] Gate: PRO check; Free users see upgrade modal.
- [ ] Context: Canvas PNG + Spec Sheet JSON.
- [ ] AI: Gemini 1.5 Pro (Persona-based prompt).

### Step 3.3: Payments

- [ ] Integration: Lemon Squeezy (MoR).
- [ ] Webhooks: `subscription_created` ‚Üí update `profiles.tier`.
- [ ] Limits: Enforce "3 Projects Max" for Free users.

---

## üìö Reference A: Database Schema (Supabase)

### profiles
- `id` (uuid, PK)
- `email`
- `tier` enum (`free`, `pro`)

### projects
- `id` (uuid, PK)
- `user_id` (FK)
- `pdf_url` (text)
- `constraints` (jsonb)

**Rule:** Unique (`user_id`, `pdf_url`)

### notes
- `id` (uuid, PK)
- `project_id` (FK)
- `content` (text/json)
- `order` (int)

### canvas_snapshots
- `id` (uuid, PK)
- `project_id` (FK)
- `storage_path` (text)
- `created_at` (timestamp)

**Rule:** Query by `project_id` ordered by `created_at DESC`

### flashcards
- `id` (uuid, PK)
- `project_id` (FK)
- `front` (text)
- `back` (text)
- `source_node_id` (text)

---

## üé® Reference B: UI Master Spec ("Soft Pop")

**Colors**
- Dark Base: `#121212`
- Acid Lime: `#a3e635`
- Electric Violet: `#8b5cf6`

**Fonts**
- Inter (UI)
- JetBrains Mono (Specs)

**Physics**
- Buttons: `active:scale-95 duration-75`
- Cards: `hover:scale-[1.01] duration-300`
- Glass: `bg-zinc-900/80 backdrop-blur-md border border-white/10`

---

## ü§ñ Reference C: AI System Prompts

### 1. Spec Sheet Extractor (Flash)
"Extract constraints from this design brief: Deadline, Dimensions, Formats, Mandatory Elements. Return ONLY a JSON object."

### 2. Reference Hunter (Flash)
"Generate 3 expert search queries to find visual examples of [Topic] on high-quality design archives. Do not explain."

### 3. Design Doctor ‚Äì Compliance (Pro)
"Critique strictly against constraints. No style advice."

### 4. Design Doctor ‚Äì Vibes (Pro)
"You are an Art Director. Ignore constraints. Judge emotion, color, and vibe."
